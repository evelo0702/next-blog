## 비동기
현재 실행중인 코드가 실행 완료 되지 않더라도 필요에 의해서 다음 코드를 실행하는 방식을 뜻함.

### 1. 콜백함수
콜백은 다른 함수의 인자로 함수를 넘기는 것을 말한다. 콜백 함수로 비동기 프로그래밍을 짤 수 있지만, 모든 콜백 함수가 비동기이진 않다.

자바스크립트는 비동기처리를 위한 하나의 패턴으로 콜백함수를 사용한다. 하지만 전통적인 콜백 패턴은 콜백 지옥으로 인해 가독성이 나쁘고, 비동기 처리 중 발생한 에러의 처리가 곤란하며, 여러개의 비동기 처리를 한번에 처리하는데 한계가 있다.



> 콜백지옥 - 콜백함수의 후속 처리를 위해 비동기 함수가 비동기 처리 결과를 가지고 또 다시 비동기 함수를 호출해야되는 경우, 콜백함수호출이 중첩되어 복잡도가 높아지는 현상을 콜백 지옥이라고 한다.

### 2. promise
콜백지옥을 해결하기 위해 새롭게 추가된 기능으로 .then을 사용해서 순차적인 코드 해석이 수월해짐.

### 3. async await
promise의 아쉬운점을 보완해서 더 간결하게 비동기 처리를 할 수 있는 기능

async/await는 Promise를 기반으로 동작하며, then/catch/finally와 같은 후속 처리 메서드 없이 마치 동기 처리처럼 사용할 수 있다.

함수 앞에 async 를 작성하고 받아올 데이터에 await을 작성하면 해당 데이터를 받아올때 까지 다음 코드가 실행되지않음.

콜백 함수나 Promise는 무조건 api를 호출한 후, 또 다른 콜백 함수를 실행하여 데이터의 처리가 가능했지만, async/await는 해당 함수 내부에서 바로 동기 처리처럼 데이터를 수정할 수 있다. 또한 try/catch 문으로 에러 처리도 훨씬 수월하다.



## JS는 싱글스레드인데 어떻게 비동기 처리가 가능한가?
![](https://velog.velcdn.com/images%2Fedie_ko%2Fpost%2F1a6bbcb0-40d5-461d-9de9-d2f58613a62b%2Fimage.png)

비동기 처리를 하는 함수가 콜스택에 들어오면 바로 Web API로 보내지고 콜스택에서는 사라진다. 비동기 함수는 자바스크립트 엔진을 구동하는 환경인, 브라우저나 Nods.js가 담당한다.

시간이 지난 후 Web API에서 처리가 완료된 비동기 함수는 일이 끝나면 그 결과와 콜백이 callback queue에 추가된다.
그리고 다시 이벤트 루프에 의해 콜스택에 쌓인다.
즉, 브라우저는 콜스택이 비워질 때마다 callback queue에서 가장 오래된 작업을 꺼내와 콜스택에 넣는데 이를 이벤트 루프라고 부른다

**즉 비동기 처리는 브라우저나 node.js가 하는것임**

